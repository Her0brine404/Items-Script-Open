-- LocalScript: Place in StarterPlayer.StarterPlayerScripts
-- Simple GUI with single-line textbox for teleport scripts

local Players = game:GetService("Players")
local TeleportService = game:GetService("TeleportService")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

local ATTEMPTS = 1500
local COOLDOWN = 0.01
local IS_RUNNING = false

-- Create ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "TeleportGUI"
screenGui.ResetOnSpawn = false
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- Main frame
local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 450, 0, 180)
mainFrame.Position = UDim2.new(0.5, -225, 0.5, -90)
mainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
mainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 25)
mainFrame.BorderSizePixel = 0

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 8)
corner.Parent = mainFrame

-- Title
local title = Instance.new("TextLabel")
title.Name = "Title"
title.Size = UDim2.new(1, 0, 0, 40)
title.BackgroundTransparency = 1
title.Text = "TELEPORT SCRIPT EXECUTOR"
title.Font = Enum.Font.GothamBold
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.TextSize = 18
title.Parent = mainFrame

-- Single-line textbox for custom scripts
local scriptBox = Instance.new("TextBox")
scriptBox.Name = "ScriptBox"
scriptBox.Size = UDim2.new(1, -20, 0, 40)
scriptBox.Position = UDim2.new(0, 10, 0, 50)
scriptBox.BackgroundColor3 = Color3.fromRGB(30, 30, 35)
scriptBox.BorderSizePixel = 0
scriptBox.Font = Enum.Font.RobotoMono
scriptBox.PlaceholderText = "Paste TeleportToPlaceInstance script here (single line)..."
scriptBox.Text = ""
scriptBox.TextColor3 = Color3.fromRGB(255, 255, 255)
scriptBox.TextSize = 14
scriptBox.TextWrapped = false
scriptBox.MultiLine = false
scriptBox.ClearTextOnFocus = false

local scriptCorner = Instance.new("UICorner")
scriptCorner.CornerRadius = UDim.new(0, 6)
scriptCorner.Parent = scriptBox

scriptBox.Parent = mainFrame

-- Status label
local statusLabel = Instance.new("TextLabel")
statusLabel.Name = "Status"
statusLabel.Size = UDim2.new(1, -20, 0, 30)
statusLabel.Position = UDim2.new(0, 10, 0, 100)
statusLabel.BackgroundTransparency = 1
statusLabel.Text = "Press ENTER to start (1500 attempts)"
statusLabel.Font = Enum.Font.Gotham
statusLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
statusLabel.TextSize = 14
statusLabel.Parent = mainFrame

-- Counter label
local counterLabel = Instance.new("TextLabel")
counterLabel.Name = "Counter"
counterLabel.Size = UDim2.new(1, -20, 0, 30)
counterLabel.Position = UDim2.new(0, 10, 0, 130)
counterLabel.BackgroundTransparency = 1
counterLabel.Text = ""
counterLabel.Font = Enum.Font.Gotham
counterLabel.TextColor3 = Color3.fromRGB(150, 200, 255)
counterLabel.TextSize = 12
counterLabel.Parent = mainFrame

mainFrame.Parent = screenGui
screenGui.Parent = playerGui

-- Function to extract teleport info
local function extractTeleportInfo(scriptText)
    -- Remove whitespace
    scriptText = scriptText:gsub("%s+", "")
    
    -- Look for TeleportToPlaceInstance
    local pattern = "TeleportToPlaceInstance%((%d+),['\"]([%w%-]+)['\"]%)"
    local placeId, instanceId = scriptText:match(pattern)
    
    if placeId and instanceId then
        return tonumber(placeId), instanceId
    end
    
    return nil, nil
end

-- Function to start teleport loop
local function startTeleportLoop()
    if IS_RUNNING then return end
    
    local scriptText = scriptBox.Text
    if scriptText == "" then
        statusLabel.Text = "Enter a script first"
        task.wait(1.5)
        statusLabel.Text = "Press ENTER to start (1500 attempts)"
        return
    end
    
    local placeId, instanceId = extractTeleportInfo(scriptText)
    
    if not placeId then
        statusLabel.Text = "Invalid script format"
        task.wait(1.5)
        statusLabel.Text = "Press ENTER to start (1500 attempts)"
        return
    end
    
    IS_RUNNING = true
    statusLabel.Text = "RUNNING - Press ESC to stop"
    
    local connection
    connection = UserInputService.InputBegan:Connect(function(input)
        if input.KeyCode == Enum.KeyCode.Escape and IS_RUNNING then
            IS_RUNNING = false
            connection:Disconnect()
            statusLabel.Text = "STOPPED - Press ENTER to restart"
            counterLabel.Text = ""
        end
    end)
    
    -- Run teleport attempts
    task.spawn(function()
        for i = 1, ATTEMPTS do
            if not IS_RUNNING then break end
            
            counterLabel.Text = string.format("Attempt %d/%d", i, ATTEMPTS)
            
            pcall(function()
                TeleportService:TeleportToPlaceInstance(placeId, instanceId)
            end)
            
            if i < ATTEMPTS then
                task.wait(COOLDOWN)
            end
        end
        
        if IS_RUNNING then
            IS_RUNNING = false
            statusLabel.Text = "COMPLETED 1500 attempts"
            counterLabel.Text = ""
            connection:Disconnect()
        end
    end)
end

-- Handle Enter key in textbox
scriptBox.FocusLost:Connect(function(enterPressed)
    if enterPressed and not IS_RUNNING then
        startTeleportLoop()
    end
end)

-- Also listen for global Enter key
UserInputService.InputBegan:Connect(function(input, processed)
    if input.KeyCode == Enum.KeyCode.Return or input.KeyCode == Enum.KeyCode.KeypadEnter then
        if not processed and not IS_RUNNING then
            startTeleportLoop()
        end
    end
end)

-- Make GUI draggable
local dragging = false
local dragStart = Vector2.new(0, 0)
local frameStart = Vector2.new(0, 0)

title.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        frameStart = Vector2.new(mainFrame.Position.X.Scale, mainFrame.Position.Y.Scale)
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - dragStart
        local newX = frameStart.X + (delta.X / screenGui.AbsoluteSize.X)
        local newY = frameStart.Y + (delta.Y / screenGui.AbsoluteSize.Y)
        mainFrame.Position = UDim2.new(newX, 0, newY, 0)
    end
end)

UserInputService.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = false
    end
end)
